{"ast":null,"code":"import { fromJS } from 'immutable';\nimport * as constants from './constants'; //defaultState 为immutable 的数据，所以他们也会变成immutable的数组\n\nconst defaultState = fromJS({\n  topicList: [],\n  articleList: [],\n  writerList: [],\n  articlePage: 1,\n  showScroll: false,\n  page: 1,\n  totalPage: 1\n}); //优化\n\nconst getHomeInfo = (state, action) => {\n  return state.merge({\n    topicList: fromJS(action.topicList),\n    articleList: fromJS(action.articleList),\n    writerList: fromJS(action.writerList)\n  });\n};\n\nconst addHomeList = (state, action) => {\n  return state.merge({\n    articleList: state.get('articleList').concat(action.list),\n    articlePage: action.nextPage\n  });\n};\n\nexport default ((state = defaultState, action) => {\n  switch (action.type) {\n    case constants.GET_HOME_INFO:\n      return getHomeInfo(state, action);\n\n    case constants.ADD_HOME_LIST:\n      return addHomeList(state, action);\n\n    case constants.TOGGLE_TOP_SHOW:\n      return state.set('showScroll', action.show);\n\n    case constants.ADD_AUTHOR_LIST:\n      return state.merge({\n        list: action.data,\n        totalPage: action.totalPage\n      });\n\n    case constants.CHANGE_AUTHOR_LIST:\n      return state.set('page', action.page);\n\n    default:\n      return state;\n  }\n}); //原始代码\n//fromJS: 把普通js转成immutable\n// export default (state = defaultState, action) => {\n//   switch(action.type){\n//     case constants.GET_HOME_INFO:\n//     return state.merge({\n//       topicList: fromJS(action.topicList),\n//       articleList: fromJS(action.articleList),\n//       writerList: fromJS(action.writerList)\n//     });\n//     case constants.ADD_HOME_LIST:\n//     return state.merge({\n//       articleList: state.get('articleList').concat(action.list),\n//       articlePage: action.nextPage\n//     });\n//     case constants.TOGGLE_TOP_SHOW:\n//       return state.set('showScroll', action.show);\n//     default:\n//       return state;\n//   }\n// }\n//原始写法：  state.set('topicList', fromJS(action.topicList)).set('articleList', fromJS(action.articleList)).set('writerList',fromJS(action.writerList))\n// case constants.ADD_HOME_LIST:\n// return state.set('articleList', state.get('articleList').concat(action.list))","map":{"version":3,"sources":["/Users/zoemeng/zoe/projects/reading/src/pages/home/store/reducer.js"],"names":["fromJS","constants","defaultState","topicList","articleList","writerList","articlePage","showScroll","page","totalPage","getHomeInfo","state","action","merge","addHomeList","get","concat","list","nextPage","type","GET_HOME_INFO","ADD_HOME_LIST","TOGGLE_TOP_SHOW","set","show","ADD_AUTHOR_LIST","data","CHANGE_AUTHOR_LIST"],"mappings":"AAAA,SAAQA,MAAR,QAAqB,WAArB;AACA,OAAQ,KAAKC,SAAb,MAA4B,aAA5B,C,CAEA;;AACA,MAAMC,YAAY,GAAGF,MAAM,CAAC;AAC1BG,EAAAA,SAAS,EAAE,EADe;AAE1BC,EAAAA,WAAW,EAAG,EAFY;AAG1BC,EAAAA,UAAU,EAAC,EAHe;AAI1BC,EAAAA,WAAW,EAAE,CAJa;AAK1BC,EAAAA,UAAU,EAAC,KALe;AAM1BC,EAAAA,IAAI,EAAE,CANoB;AAO1BC,EAAAA,SAAS,EAAE;AAPe,CAAD,CAA3B,C,CAWA;;AACA,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrC,SAAOD,KAAK,CAACE,KAAN,CAAY;AACjBV,IAAAA,SAAS,EAAEH,MAAM,CAACY,MAAM,CAACT,SAAR,CADA;AAEjBC,IAAAA,WAAW,EAAEJ,MAAM,CAACY,MAAM,CAACR,WAAR,CAFF;AAGjBC,IAAAA,UAAU,EAAEL,MAAM,CAACY,MAAM,CAACP,UAAR;AAHD,GAAZ,CAAP;AAKD,CAND;;AAQA,MAAMS,WAAW,GAAG,CAACH,KAAD,EAAOC,MAAP,KAAkB;AACpC,SAAOD,KAAK,CAACE,KAAN,CAAY;AACjBT,IAAAA,WAAW,EAAEO,KAAK,CAACI,GAAN,CAAU,aAAV,EAAyBC,MAAzB,CAAgCJ,MAAM,CAACK,IAAvC,CADI;AAEjBX,IAAAA,WAAW,EAAEM,MAAM,CAACM;AAFH,GAAZ,CAAP;AAID,CALD;;AASA,gBAAe,CAACP,KAAK,GAAGT,YAAT,EAAuBU,MAAvB,KAAkC;AAC/C,UAAOA,MAAM,CAACO,IAAd;AACE,SAAKlB,SAAS,CAACmB,aAAf;AACE,aAAOV,WAAW,CAACC,KAAD,EAAOC,MAAP,CAAlB;;AAEF,SAAKX,SAAS,CAACoB,aAAf;AACE,aAAOP,WAAW,CAACH,KAAD,EAAOC,MAAP,CAAlB;;AAEF,SAAKX,SAAS,CAACqB,eAAf;AACE,aAAOX,KAAK,CAACY,GAAN,CAAU,YAAV,EAAwBX,MAAM,CAACY,IAA/B,CAAP;;AAEF,SAAKvB,SAAS,CAACwB,eAAf;AACC,aAAOd,KAAK,CAACE,KAAN,CAAY;AACjBI,QAAAA,IAAI,EAAEL,MAAM,CAACc,IADI;AAEjBjB,QAAAA,SAAS,EAAEG,MAAM,CAACH;AAFD,OAAZ,CAAP;;AAKA,SAAKR,SAAS,CAAC0B,kBAAf;AACE,aAAOhB,KAAK,CAACY,GAAN,CAAU,MAAV,EAAkBX,MAAM,CAACJ,IAAzB,CAAP;;AAEH;AACE,aAAOG,KAAP;AApBJ;AAsBD,CAvBD,E,CA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA","sourcesContent":["import {fromJS} from 'immutable';\nimport  * as constants from './constants';\n\n//defaultState 为immutable 的数据，所以他们也会变成immutable的数组\nconst defaultState = fromJS({\n  topicList: [],\n  articleList : [],  \n  writerList:[],\n  articlePage: 1,\n  showScroll:false,\n  page: 1,\n  totalPage: 1\n});\n\n\n//优化\nconst getHomeInfo = (state, action) => {\n  return state.merge({\n    topicList: fromJS(action.topicList),\n    articleList: fromJS(action.articleList),\n    writerList: fromJS(action.writerList)\n  });\n}\n\nconst addHomeList = (state,action) => {\n  return state.merge({\n    articleList: state.get('articleList').concat(action.list),\n    articlePage: action.nextPage\n  });\n};\n\n\n\nexport default (state = defaultState, action) => {\n  switch(action.type){\n    case constants.GET_HOME_INFO:\n      return getHomeInfo(state,action);\n\n    case constants.ADD_HOME_LIST:\n      return addHomeList(state,action);\n\n    case constants.TOGGLE_TOP_SHOW:\n      return state.set('showScroll', action.show);\n\n    case constants.ADD_AUTHOR_LIST:\n     return state.merge({\n       list: action.data,\n       totalPage: action.totalPage\n     });\n\n     case constants.CHANGE_AUTHOR_LIST:\n       return state.set('page', action.page)\n  \n    default:\n      return state;\n  }\n}\n\n\n\n//原始代码\n//fromJS: 把普通js转成immutable\n// export default (state = defaultState, action) => {\n//   switch(action.type){\n//     case constants.GET_HOME_INFO:\n//     return state.merge({\n//       topicList: fromJS(action.topicList),\n//       articleList: fromJS(action.articleList),\n//       writerList: fromJS(action.writerList)\n//     });\n\n//     case constants.ADD_HOME_LIST:\n//     return state.merge({\n//       articleList: state.get('articleList').concat(action.list),\n//       articlePage: action.nextPage\n//     });\n\n//     case constants.TOGGLE_TOP_SHOW:\n//       return state.set('showScroll', action.show);\n//     default:\n//       return state;\n//   }\n// }\n\n\n//原始写法：  state.set('topicList', fromJS(action.topicList)).set('articleList', fromJS(action.articleList)).set('writerList',fromJS(action.writerList))\n\n// case constants.ADD_HOME_LIST:\n// return state.set('articleList', state.get('articleList').concat(action.list))\n"]},"metadata":{},"sourceType":"module"}